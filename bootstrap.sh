#!/bin/bash

# install repo and setup env

# add kali repo to apt sources

APT_CONFIG_DIR=/etc/apt
APT_SOURCE_LIST=/etc/apt/sources.list.d/kali.list

if [[ ! $(grep -ir '^deb http://.*kali' $APT_CONFIG_DIR) ]]; then

cat >> $APT_SOURCE_LIST <<EOF
deb http://http.kali.org/kali kali-rolling main contrib non-free
# For source package access, uncomment the following line
# deb-src http://http.kali.org/kali kali-rolling main contrib non-free
EOF

fi

# install git, vim
apt-get -y install vim git geany keepnote shutter leafpad

# disable visual mode with right mouse button
$(grep 'mouse-=a' ~/.vimrc) || echo 'mouse-=a' >> ~/.vimrc

# personalise git
USERNAME = e-noodle              # username to checkin to github
EMAIL = support@enoodle.com.au   # email address to appear in commits

git config --global user.name $USERNAME
git config --global user.email $EMAIL
git config --global url.ssh://git@github.com/.insteadOf https://github.com/

# setup ssh default config

GIT_PROJECT=security-pentesting
ssh-keygen -t rsa -b 2048 -i ~/.ssh/${GIT_PROJECT}.key
cat > ~/.ssh/config <<EOF
Host github-${GIT_PROJECT}
    User git
    HostName github.com
    IdentityFile ~/.ssh/github-${GIT_PROJECT}.key
EOF

echo ' Allow public key to update github repo'
echo 
echo ' - Browse to github repo: https://github.com/e-noodle/security-pentesting -> settings -> deploykeys 
echo ' - Check read/write 
echo ' - Add
echo

# reverse tools
apt-get install ltrace strace edb-debugger radar2 ht deluge

exit 0
